<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Meme Radio</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" 
  integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
  <link href="memestyle.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
</head>
<body>
  <div id="back">
    <div v-if="page">
      <img id="backimage" v-bind:src="page.image ? page.image : '#'">
      <img id="img0"
        v-bind:src="page.topleft.image ? page.topleft.image : '#'" class="spinner top left" 
        v-on:click="setMusic(0)" 
        v-bind:class="{'border-yellow' :spinners[0].downloading, 'border-green': spinners[0].playing, spin: playing, paused: !playing}">
      <img id="img1"
        v-bind:src="page.topright.image ? page.topright.image : '#'" class="spinner top right" 
        v-on:click="setMusic(1)"
        v-bind:class="{'border-yellow' :spinners[1].downloading, 'border-green': spinners[1].playing, spin: playing, paused: !playing}">>
      <img id="img2"
        v-bind:src="page.botleft.image ? page.botleft.image : '#'" class="spinner bottom left" 
        v-on:click="setMusic(2)"
        v-bind:class="{'border-yellow' :spinners[2].downloading, 'border-green': spinners[2].playing, spin: playing, paused: !playing}">>
      <img id="img3"
        v-bind:src="page.botright.image ? page.botright.image : '#'" class="spinner bottom right" 
        v-on:click="setMusic(3)"
        v-bind:class="{'border-yellow' :spinners[3].downloading, 'border-green': spinners[3].playing, spin: playing, paused: !playing}">>
      <div class="center rounder">
        <h2 style="text-align: center; margin-bottom: 50px; text-shadow: 2px 2px 10px white;" v-if="page">{{page.name}}</h2>
        <img src="KOT.jpg" class="spinner" v-on:click="togglePlay" v-bind:class="{spin: playing, paused: !playing}">
      </div>
    </div>
    <div v-else="page"><h1>Открой мем</h1></div>
  </div>
  <div id="sidebar" class="collapse" v-on:load="loadPages()">
    <div class="card">
    <div class="card-body sidebar" >
      <div>
        <h4>Меню</h4>
        <p>
        <input v-model="searchstring" type="text" placeholder="Название">
        <button class="btn btn-primary" v-on:click="searchPage">Найти</button>
      </p>
      <p>
        <button class="btn btn-primary m-x-5" v-on:click="randomPage">Случайная страница</button>
        <button v-if="link" class="btn btn-primary m-x-5" v-on:click="upChain">Связанная страница</button>
      </p>
      </div>
      <h5>Страницы</h3>
      <ul class="list-group">
        <li class="list-group-item text-light bg-secondary" v-for="(page, index) in pages" v-on:click="switchTo(index)" data-bs-toggle="collapse" data-bs-target="#sidebar" aria-expanded="false" aria-controls="sidebar">
          {{page.name}}
        </li>
      </ul>
	  <p>
      <a class="btn btn-primary  m-x-5" href="/redact">Редактировать страницы</a>
      <span class="btn btn-primary  m-x-5" v-on:click="chain">Связать</span>
    </p>
    </div>
  </div>
  </div>
  <button class="top menubtn btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#sidebar" aria-expanded="false" aria-controls="sidebar">
      Меню
    </button>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" 
        integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous"></script>
  <script src="memescript.js"></script>
</body>
</html>